(this.webpackJsonpcardholder=this.webpackJsonpcardholder||[]).push([[0],{158:function(e,t,a){e.exports=a(199)},166:function(e,t,a){},167:function(e,t){},199:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(123),l=a.n(n),c=(a(166),a(290)),i=a(286),s=a(301),d=a(302),u=a(77),m=a(299),p=a(300),b=a(289),g=a(274),h=a(271),y=a(270),f=a(275),E=a(276),x=a(277),v=(a(68),a(124)),k=a(8),w=a(18),C=a.n(w),S=a(252),O=a(125);var j=function(e){let{show:t}=e;return o.a.createElement(i.a,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.4)",display:t?"flex":"none",justifyContent:"center",alignItems:"center",zIndex:9999}},o.a.createElement(S.a,{sx:{animationDuration:"550ms",["& ."+O.a.circle]:{strokeLinecap:"round"}},size:40,thickness:4}))},D=a(282),I=a(279);function _(e){let{state:t,type:a,message:r,setAlertState:n}=e;return o.a.createElement(D.a,{open:t,autoHideDuration:5e3,onClose:()=>n(!1),anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiPaper-root":{background:""+k.backgroundColor,border:"6px solid black",color:"white",fontWeight:"900","& .MuiAlert-icon":{color:"white",fontWeight:"900"},"& .MuiAlert-action":{"& .MuiIconButton-root":{color:"white",fontWeight:"900"}}}}},o.a.createElement(I.a,{onClose:()=>n(!1),severity:a},r))}var T=a(134),M=a(298),A=a(268),N=a(111),R=a(127),W=a.n(R),P=a(291),B=a(261),L=a(293),F=a(294),K=a(295),z=a(285),G=a(262);function V(e){let{type:t,message:a}=e;const[n,l]=Object(r.useState)(!0),c=async(e,a)=>{["escapeKeyDown","backdropClick"].includes(a)||("reset"===t&&(await Object(k.truncateIndexedDB)(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")),window.location.href="/cardholder")};let s=Object(k.dialogSx)();return o.a.createElement(P.a,{PaperProps:{sx:s},open:n,onClose:c,"aria-labelledby":"error-dialog-title","aria-describedby":"error-dialog-description"},o.a.createElement(B.a,{id:"error-dialog-title"},o.a.createElement(i.a,{display:"flex",alignItems:"center"},"reset"===t?o.a.createElement(o.a.Fragment,null):o.a.createElement(G.a,{style:{color:"black",marginRight:"8px"}}),o.a.createElement(u.a,{variant:"h6",component:"span"},"reset"===t?"App Reset":"Error Occurred"))),o.a.createElement(L.a,null,o.a.createElement(F.a,{variant:"body2",sx:{fontWeight:"600",marginTop:2}},a)),o.a.createElement(K.a,null,o.a.createElement(z.a,{onClick:c,color:"primary",sx:k.buttonSx},"reset"===t?"Reset Now":"Okay")))}function H(e){let{from:t,onSyncComplete:a,setIsLoading:n}=e;const l=Object({NODE_ENV:"production",PUBLIC_URL:"/cardholder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_CLIENT_ID||("localhost"===window.location.hostname?"386326794734-55j7cufjv2fgn75aa6d96b32i4j817o8.apps.googleusercontent.com":"386326794734-7vscbpqmdplr1grnt7ddva2c62597nut.apps.googleusercontent.com"),[s,d]=Object(r.useState)(!1),[m,p]=Object(r.useState)(!1),b=Object(r.useCallback)(()=>d(!0),[]),g={PaperProps:{sx:{width:"340px",borderRadius:"12px",boxShadow:"8px 8px 0px "+k.backgroundColor,border:"6px solid black","& .MuiDialogTitle-root":{fontWeight:"800",borderBottom:"2px solid black",padding:"16px"},"& .MuiButton-root":{fontWeight:"800",color:"black",borderColor:"black","&:hover":{fontWeight:"800",color:"white",backgroundColor:"black",borderColor:"black"}}}},open:s,onClose:()=>d(!1),"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description"};return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement(P.a,g,o.a.createElement(B.a,{id:"confirm-dialog-title"},o.a.createElement(i.a,{display:"flex",alignItems:"center"},o.a.createElement(u.a,{variant:"h6",component:"span"},"Confirm Sync"))),o.a.createElement(L.a,null,o.a.createElement(F.a,{variant:"body2",sx:{fontWeight:"600",marginTop:2}},"You will be redirect to Google sign in page to perform Google Drive Sync?")),o.a.createElement(K.a,null,o.a.createElement(z.a,{onClick:()=>d(!1),variant:"outlined"},"Cancel"),o.a.createElement(N.a,{clientId:l,onScriptLoadError:()=>p(!0)},o.a.createElement(U,{from:t,onSyncComplete:a,setIsLoading:n,onSuccess:()=>d(!1)})))),m&&o.a.createElement(V,{from:"nointernet",message:"Please ensure you have a stable internet connection for this action."}),"card"===t?o.a.createElement(c.a,{className:"sync-icon",onClick:b},o.a.createElement(W.a,null)):o.a.createElement("div",{onClick:b},"Sync with Google Drive"))}function U(e){let{onSyncComplete:t,setIsLoading:a,onSuccess:r}=e;const n=Object(N.b)({flow:"auth-code",ux_mode:"redirect",scope:"https://www.googleapis.com/auth/drive.appdata",onSuccess:()=>{a(!0),Object(k.processCardData)("pushToServer",void 0,!0).then(()=>{a(!1),t(!0,"success","Sync Completed"),r()}).catch(e=>{a(!1),t(!0,"error","Issue with Sync, please try again later.")})},onError:e=>{t(!0,"error","Failed to authenticate with Google. Please try again.")}});return o.a.createElement(z.a,{onClick:n,variant:"outlined",sx:{minWidth:"100px",transition:"all 0.3s","&:hover":{transform:"translateY(-2px)"}}},"Sync")}var Y=a(296),q=a(284),J=a(264),$=a(266),Q=a(263),X=a(265),Z=a(267);function ee(e){let{open:t,setOpen:a}=e,r=Object(k.dialogSx)();return o.a.createElement(P.a,{PaperProps:{sx:r},open:t,onClose:()=>a(!1),"aria-labelledby":"info-dialog-title","aria-describedby":"info-dialog-description"},o.a.createElement(B.a,{id:"info-dialog-title"},o.a.createElement(Q.a,{fontSize:"small",style:{marginRight:"8px"}}),"Important Information"),o.a.createElement(L.a,null,o.a.createElement(F.a,{id:"info-dialog-description",component:"div"},o.a.createElement(Y.a,null,o.a.createElement(q.a,null,o.a.createElement(J.a,null,o.a.createElement(X.a,{fontSize:"small"})),o.a.createElement($.a,{primary:"Encrypted Storage",secondary:"All card details are securely stored in an encrypted format."})),o.a.createElement(q.a,null,o.a.createElement(J.a,null,o.a.createElement(Z.a,{fontSize:"small"})),o.a.createElement($.a,{primary:"Troubleshooting",secondary:"If you encounter persistent issues, reset the app from settings. Note: Resetting removes data from local storage but not from Google Drive if synced."}))))),o.a.createElement(K.a,null,o.a.createElement(z.a,{onClick:()=>a(!1),color:"primary",sx:k.buttonSx},"Got it")))}function te(e){let{invokeAlert:t,setIsLoading:a,setCardsData:n}=e;const[l,i]=Object(r.useState)(null),s=Boolean(l),[d,u]=Object(r.useState)(!!localStorage.getItem("access_token")),[m,p]=Object(r.useState)(!1),[b,g]=Object(r.useState)(!1),[h,y]=Object(r.useState)("reset"),[f,E]=Object(r.useState)("Resetting the app will delete all the app related data from local.");return o.a.createElement("div",null,o.a.createElement(c.a,{id:"basic-button",sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:e=>{i(e.currentTarget)}},o.a.createElement(A.a,null)),o.a.createElement(T.a,{id:"basic-menu",anchorEl:l,open:s,onClose:()=>{i(null)},MenuListProps:{"aria-labelledby":"basic-button"},sx:{"& .MuiPaper-root":{borderRadius:"12px",boxShadow:"8px 8px 0px "+k.backgroundColor,border:"6px solid black"}}},d&&o.a.createElement(M.a,{onClick:async()=>{try{a(!0);let e=await Object(k.processCardData)("pushToServer",void 0,!0);n(e),t(!0,"success","Sync Competed")}catch(e){y("error"),E("Please ensure you have a stable internet connection for this action."),g(!0)}finally{i(null),a(!1)}}},"Sync with Google Drive"),d&&o.a.createElement(M.a,{onClick:async()=>{try{a(!0),await Object(k.processCardData)("deleteFromServer",void 0,!0),u(!1),t(!0,"success","Delete From Google Drive")}catch(e){y("error"),E("Please ensure you have a stable internet connection for this action."),g(!0)}finally{i(null),a(!1)}}},"Delete From Google Drive"),!d&&o.a.createElement(M.a,null,o.a.createElement(H,{setIsLoading:a,onSyncComplete:t})),o.a.createElement(M.a,{onClick:()=>{i(null),window.location.href="/cardholder"}},"Refresh App"),o.a.createElement(M.a,{onClick:()=>{i(null),y("reset"),E("Resetting the app will delete all the app related data from local."),g(!0)}},"Reset App"),o.a.createElement(M.a,{onClick:()=>{i(null),p(!0)}},"App Info")),o.a.createElement(ee,{open:m,setOpen:p}),b&&o.a.createElement(V,{type:h,message:f}))}var ae=a(278),re=a(281),oe=a(269),ne=a(272);var le=e=>{let{isKeyDialogOpen:t,setIsKeyDialogOpen:a,viewMode:n,selectedCardIndex:l,cardData:s,callback:d,setKeyDuration:m,setEncryptionKey:b}=e;const[g,f]=Object(r.useState)(""),[E,x]=Object(r.useState)(30),[v,w]=Object(r.useState)(!1),[S,O]=Object(r.useState)(""),[j,D]=Object(r.useState)(!1),I=Object(r.useMemo)(()=>Array.from({length:6},(e,t)=>({value:10*(t+1),label:10*(t+1)+"s"})),[]);let _=Object(k.dialogSx)();return delete _["& .MuiDialogTitle-root"].borderBottom,o.a.createElement(P.a,{open:t,onClose:()=>a(!1),PaperProps:{sx:_},"aria-labelledby":"key-dialog-title"},o.a.createElement(B.a,{id:"key-dialog-title"},o.a.createElement(i.a,{display:"flex",alignItems:"center"},o.a.createElement(oe.a,{style:{marginRight:"8px"}}),o.a.createElement(u.a,{variant:"h6",component:"span"},"Enter Encryption Key"))),o.a.createElement(L.a,null,o.a.createElement(ae.a,{autoFocus:!0,required:!0,margin:"dense",id:"cardKey",name:"cardKey",label:"Encryption Key",type:j?"text":"password",fullWidth:!0,variant:"standard",value:g,onChange:e=>f(e.target.value),error:v,helperText:S,InputProps:{endAdornment:o.a.createElement(p.a,{position:"end"},o.a.createElement(c.a,{"aria-label":"toggle password visibility",onClick:()=>D(e=>!e),onMouseDown:e=>{e.preventDefault()},edge:"end"},j?o.a.createElement(y.a,null):o.a.createElement(h.a,null)))},sx:{"& .MuiInputBase-root":{color:"black",fontSize:"0.9rem","&::before":{borderBottom:"2px solid black"},"&::after":{borderBottom:"2px solid black"},"&:hover:not(.Mui-disabled)::before":{borderBottom:"2px solid black"}},"& .MuiInputAdornment-root":{color:"black"},"& .MuiIconButton-root":{color:"black"},"& .MuiFormLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .Mui-error":{color:"red","&::after":{borderBottomColor:"red"}},"& .MuiFormHelperText-root":{color:"red"}}}),"show"===n&&o.a.createElement(i.a,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:2}},o.a.createElement(u.a,{variant:"body2",gutterBottom:!0},o.a.createElement(ne.a,{fontSize:"small",style:{verticalAlign:"middle",marginRight:"4px"}}),"Time to Destroy"),o.a.createElement(i.a,{sx:{width:"80%",maxWidth:300}},o.a.createElement(re.a,{name:"timeToDestroy",defaultValue:30,step:10,min:10,max:60,marks:I,valueLabelDisplay:"auto",value:E,onChange:(e,t)=>x(t)}))),o.a.createElement(u.a,{variant:"caption",sx:{display:"block",mt:2,color:"text.secondary",fontWeight:"800",textAlign:"center"}},"Keep this key secure. It's essential for encrypting/decrypting the data.")),o.a.createElement(K.a,null,o.a.createElement(z.a,{onClick:()=>a(!1),color:"primary",sx:k.buttonSx},"Cancel"),o.a.createElement(z.a,{color:"primary",onClick:()=>g.length<10?(w(!0),void O("Minimum 10 characters required")):s&&s.code&&19!==Object(k.decryptData)(s.code,g,C.a).length?(w(!0),void O("Invalid Key")):(w(!1),O(""),"show"===n&&m(E),b(g),d(n,l),void a(!1)),sx:k.buttonSx},"create"===n?"Add":"edit"===n?"Edit":"delete"===n?"Delete":"Show")))},ce=a(287),ie=a(288),se=a(273),de=a(303);function ue(e){let{handleInputChange:t,label:a,placeHolder:n,cardDetails:l,errors:c}=e;const s=Object(de.a)(ce.a)(e=>{let{theme:t,bgcolor:a}=e;return{padding:t.spacing(2),maxWidth:360,margin:"auto",backgroundColor:a,color:"white",boxShadow:"none",borderRadius:"12px"}}),d=Object(de.a)(u.a)(e=>{let{theme:t}=e;return{marginBottom:t.spacing(.5),fontWeight:700,fontSize:"0.9rem"}}),m=Object(de.a)(ae.a)(e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:"rgba(255, 255, 255, 0.4)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.9rem"},"& .MuiInputBase-input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1},"& .MuiFormLabel-root":{color:"rgba(255, 255, 255, 0.6)","&.Mui-focused":{color:"white"}},"& .MuiFormHelperText-root":{color:"#dc5757",fontSize:"0.8rem"}}}),p=e=>{const{name:a,value:r}=e.target;let o=r;switch(a){case"code":o=r.replace(/(\d{4})(?=\d)/g,"$1 ").trim();break;case"expiry":o=r.replace(/(\d{2})(?=\d)/,"$1/")}t({target:{name:a,value:o}})},[g,h]=Object(r.useState)(null),y={code:Object(r.useRef)(null),expiry:Object(r.useRef)(null),cvv:Object(r.useRef)(null),name:Object(r.useRef)(null),brand:Object(r.useRef)(null),network:Object(r.useRef)(null),network_type:Object(r.useRef)(null)};Object(r.useEffect)(()=>{y.code.current&&y.code.current.focus()},[]);const f=e=>{h(e),y[e].current&&y[e].current.focus()};Object(r.useEffect)(()=>{g&&y[g].current&&y[g].current.focus()},[g,l]);const E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return o.a.createElement(m,{inputRef:y[e],name:e,placeholder:n[e],value:l[e],fullWidth:!0,variant:"outlined",inputProps:{maxLength:t,inputMode:a},onChange:p,onFocus:()=>f(e),errors:""!==c[e],helperText:c[e]})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.a.createElement(ae.a,{inputRef:y[e],name:e,placeholder:n[e],value:l[e],fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},inputProps:{maxLength:t},onChange:p,onFocus:()=>f(e)})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(s,{bgcolor:l.color},o.a.createElement(i.a,{component:"form",noValidate:!0,autoComplete:"off"},o.a.createElement(ie.a,{container:!0,spacing:2},o.a.createElement(ie.a,{item:!0,xs:12},o.a.createElement(d,null,a.code),E("code",19,"numeric")),o.a.createElement(ie.a,{item:!0,xs:6},o.a.createElement(d,null,a.expiry),E("expiry",5,"numeric")),o.a.createElement(ie.a,{item:!0,xs:6},o.a.createElement(d,null,a.cvv),E("cvv",3,"numeric")),o.a.createElement(ie.a,{item:!0,xs:12},o.a.createElement(d,null,a.name),E("name",20))))),o.a.createElement(i.a,{sx:{marginTop:"40px",maxWidth:360,margin:"auto"}},o.a.createElement(se.a,{sx:{marginTop:"15px",marginBottom:"15px",fontWeight:"700","& .MuiDivider-wrapper":{fontWeight:"700"},"&::before, &::after":{borderTopWidth:"2px",borderTopColor:"black"}}},o.a.createElement(b.a,{label:"Optional",size:"medium"})),o.a.createElement(i.a,{component:"form",noValidate:!0,autoComplete:"off"},o.a.createElement(ie.a,{container:!0,spacing:2},o.a.createElement(ie.a,{item:!0,xs:12},o.a.createElement(d,null,a.brand),x("brand",12)),o.a.createElement(ie.a,{item:!0,xs:6},o.a.createElement(d,null,a.network),x("network",12)),o.a.createElement(ie.a,{item:!0,xs:6},o.a.createElement(d,null,a.network_type),x("network_type",12))))))}var me=a(297),pe=a(131),be=a(130),ge=a.n(be);function he(e){let{color:t,setColor:a}=e;const[r,n]=o.a.useState(null),l=Boolean(r),i=l?"simple-popover":void 0;return o.a.createElement("div",null,o.a.createElement(c.a,{sx:{textTransform:"none"},"aria-describedby":i,variant:"contained",onClick:e=>{n(e.currentTarget)}},o.a.createElement(ge.a,{fontSize:"large",sx:{padding:"5px",color:"black","&:hover":{borderRadius:"20px",fontWeight:"800",color:"white",backgroundColor:"black"}}})),o.a.createElement(me.b,{id:i,open:l,anchorEl:r,onClose:()=>{n(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},disableRestoreFocus:!0},o.a.createElement(u.a,{sx:{p:2}},o.a.createElement(pe.a,{color:t,onChange:e=>a({target:{value:e,name:"color"}})}))))}function ye(e){let{isAddCardDialogOpen:t,setIsAddCardDialogOpen:a,viewMode:n,cardsData:l,setCardsData:c,selectedCardIndex:i,encryptionKey:s,setIsLoading:d,setErrorMessage:u,setKeyDuration:m}=e;const[p,b]=Object(r.useState)({color:-1!==i?l[i].color:"black",code:-1!==i?Object(k.decryptData)(l[i].code,s,C.a):"",name:-1!==i?Object(k.decryptData)(l[i].name,s,C.a):"",cvv:-1!==i?Object(k.decryptData)(l[i].cvv,s,C.a):"",expiry:-1!==i?Object(k.decryptData)(l[i].expiry,s,C.a):"",network:-1!==i?Object(k.decryptData)(l[i].network,s,C.a):"",brand:-1!==i?Object(k.decryptData)(l[i].brand,s,C.a):"",network_type:-1!==i?Object(k.decryptData)(l[i].network_type,s,C.a):""}),[g,h]=Object(r.useState)({code:"",name:"",cvv:"",expiry:""}),y=e=>{const{name:t,value:a}=e.target;b(e=>({...e,[t]:a}))};let f=Object(k.dialogSx)();return delete f.width,delete f["& .MuiDialogTitle-root"].borderBottom,o.a.createElement(P.a,{open:t,PaperProps:{sx:f}},o.a.createElement(B.a,null,o.a.createElement("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"800"}},o.a.createElement("span",null,"create"===n?"Add Card":"Edit Card"),o.a.createElement(he,{color:p.color,setColor:y}))),o.a.createElement(L.a,null,o.a.createElement(ue,{handleInputChange:y,label:{color:"Color",code:"Number",name:"Name",cvv:"CVV",expiry:"Expiry Date",network:"Network",brand:"Brand",network_type:"Network Type"},placeHolder:{color:"grey",code:"1111222233334444",name:"xyz",cvv:"123",expiry:"MM/YY",network:"Visa/Rupay",brand:"HDFC/SBI",network_type:"Credit/Debit/MasteCard"},cardDetails:p,errors:g})),o.a.createElement(K.a,null,o.a.createElement(z.a,{sx:k.buttonSx,onClick:()=>{m(30),a(!1)}},"Close"),o.a.createElement(z.a,{sx:k.buttonSx,onClick:()=>{let e={code:"",name:"",cvv:"",expiry:""};if(e=p.code.length<19?{...e,code:"Not valid"}:{...e,code:""},e=p.expiry.length<5?{...e,expiry:"Not valid"}:{...e,expiry:""},e=p.cvv.length<3?{...e,cvv:"Not valid"}:{...e,cvv:""},e=0===p.name.length?{...e,name:"Not valid"}:{...e,name:""},h(e),Object.keys(e).filter(t=>""!==e[t])[0])return!1;let t={key:(new Date).getTime(),code:Object(k.encryptData)(p.code,s,C.a),name:Object(k.encryptData)(p.name,s,C.a),cvv:Object(k.encryptData)(p.cvv,s,C.a),expiry:Object(k.encryptData)(p.expiry,s,C.a),brand:Object(k.encryptData)(p.brand,s,C.a),network:Object(k.encryptData)(p.network,s,C.a),network_type:Object(k.encryptData)(p.network_type,s,C.a),color:p.color,is_synced:!1,is_deleted:!1};t.last_modified_time=t.key,"edit"===n&&(t={...t,key:l[i].key},t.last_modified_time=(new Date).getTime()),(async e=>{let t;try{d(!0);const r=await Object(k.processCardData)("upsert",e);t=r,0===r.length&&u("No data available.")}catch(r){t=[],u("Error updating card data: "+r.message)}finally{c(t),d(!1),m(30),a(!1)}})(t)}},"edit"===n?"Save":"Add")))}var fe=a(132),Ee=a.n(fe);const xe=window.location.host.includes("localhost")?"http://localhost:8888":"https://jeapis.netlify.app";var ve=function(){const[e,t]=Object(r.useState)([]),[a,n]=Object(r.useState)(-1),[l,w]=Object(r.useState)([]),[S,O]=Object(r.useState)(!1),[D,I]=Object(r.useState)(!1),[T,M]=Object(r.useState)([]),[A,N]=Object(r.useState)(""),[R,W]=Object(r.useState)(""),[P,B]=Object(r.useState)(0),[L,F]=Object(r.useState)(""),[K,z]=Object(r.useState)(!1),[G,U]=Object(r.useState)(""),[Y,q]=Object(r.useState)(!1),[J,$]=Object(r.useState)("success"),[Q,X]=Object(r.useState)("none"),[Z,ee]=Object(r.useState)(!1);Object(r.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("code");e?(async e=>{try{const t=await Object(k.processCardData)("fetch");z(!0);const a=await fetch(xe+"/.netlify/functions/googleAuth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,content:t})}),r=await a.json();localStorage.setItem("access_token",r.response.access_token),localStorage.setItem("refresh_token",r.response.refresh_token),r.response.content&&(await Object(k.truncateIndexedDB)(),await Object(k.processCardData)("upsert",r.response.content)),window.location.href="/cardholder"}catch(t){console.error("Error fetching tokens:",t),ee(!0)}finally{z(!1)}})(e):(async()=>{let e=[];try{z(!0);const a=await Object(k.processCardData)("fetch");e=a,0===a.length&&F("No data available.")}catch(a){e=[],F("Error fetching card data: "+a.message)}finally{t(e),z(!1)}})()},[]);const ae=Object(r.useCallback)(e=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),re=Object(r.useCallback)(e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),oe=Object(r.useCallback)(e=>{let{duration:t}=e;return o.a.createElement(v.a,{strokeWidth:4,size:40,isPlaying:!0,duration:t,colors:["#004777","#F7B801","#A30000","#A30000"],colorsTime:[7,5,2,0],onComplete:()=>{B(0),W(""),w([])}},e=>{let{remainingTime:t}=e;return t})},[]),ne=()=>{N("create"),ce("create",-1)},ce=Object(r.useCallback)((e,t,a)=>{N(e),n(t),R?de(e,t,a):I(!0)},[R]),ie=Object(r.useCallback)((e,t,a)=>{q(e),$(t),X(a)},[]),se=async(e,a)=>{let r;try{z(!0);let o=a[e];o.is_deleted=!0,o.last_modified_time=(new Date).getTime();const n=await Object(k.processCardData)("delete",o);r=n,0===n.length&&F("No data available.")}catch(o){r=[],F("Error fetching card data: "+o.message)}finally{t(r),B(30),z(!1)}},de=Object(r.useCallback)((function(t,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;switch(t){case"show":re(a);break;case"create":case"edit":B(0),w([]),O(!0);break;case"delete":B(0),w([]),se(a,r);break;case"showAll":B(0),w(Object.keys(e).map(e=>parseInt(e)));break;case"hideAll":B(0),W(""),w([]);break;default:O(!0)}}),[e,re,se]),ue=Object(r.useMemo)(()=>e.filter(e=>!R||Object.keys(e).some(t=>!["color","key"].includes(t)&&Object(k.decryptData)(e[t],R,C.a).toLowerCase().includes(G.toLowerCase()))),[e,R,G]),me=Object(r.useCallback)(t=>{let{visibleCardIndices:a,index:r,toggleCardFlip:n,handleCardAction:l}=t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{className:"delete-icon",onClick:()=>l("delete",r,e)},o.a.createElement(Ee.a,null)),o.a.createElement(c.a,{className:"edit-icon",onClick:()=>l("edit",r)},o.a.createElement(g.a,null)),o.a.createElement(c.a,{className:"ai-icon",onClick:()=>l("show",r)},a.includes(r)?o.a.createElement(h.a,null):o.a.createElement(y.a,null)),o.a.createElement(c.a,{className:"flip-icon",onClick:()=>n(r)},o.a.createElement(f.a,{fontSize:"large"})),!e[r].is_synced&&o.a.createElement(H,{from:"card",setIsLoading:z,onSyncComplete:ie}))},[e]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{sx:{flexGrow:1}},o.a.createElement(s.a,{position:"fixed",sx:{backgroundColor:k.backgroundColor,borderBottom:"6px solid black"}},o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"h6",sx:{flexGrow:1}},"My Cards"),P>0&&R&&o.a.createElement(oe,{duration:P}),0!==e.length?R&&0===P?o.a.createElement(c.a,{sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:()=>ce("hideAll")},o.a.createElement(h.a,null)):o.a.createElement(c.a,{sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:()=>ce("showAll")},o.a.createElement(y.a,null)):o.a.createElement(o.a.Fragment,null),o.a.createElement(c.a,{sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:()=>ne()},o.a.createElement(E.a,null)),o.a.createElement(te,{invokeAlert:ie,setIsLoading:z,setCardsData:t,setErrorMessage:F})))),Z&&o.a.createElement(V,{message:"Issue with Google Integration, Please try again later."}),0!==e.length&&o.a.createElement("div",{className:"search-bar"},o.a.createElement(m.a,{placeholder:"Search by Name, Brand, network or network type",startAdornment:o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{position:"start",sx:{marginLeft:"10px"}},o.a.createElement(x.a,null))),value:G,onChange:e=>{R||ie(!0,"warning","Click on the eye icon to decrypt and perform search"),U(e.target.value)},className:"search-input",disableUnderline:!0,sx:{fontWeight:"800",backgroundColor:"white",borderRadius:"12px",padding:"8px 12px",width:"80%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",border:"6px solid black",transition:"box-shadow 0.3s ease","& .MuiInputAdornment-root":{color:"black"},"&:hover, &:focus, &:focus-within, &:active":{boxShadow:"12px 12px 0px #564bf5"},"& .MuiInputAdornment-root":{color:"black"}}})),o.a.createElement("div",{className:"content",style:0===e.length?{paddingTop:"5rem"}:{}},0===e.length?o.a.createElement(u.a,{variant:"h6",sx:{flexGrow:1,justifyContent:"center",display:"flex",marginTop:"5%"}},"No data available."===L?o.a.createElement(b.a,{label:"Add Card",variant:"outlined",onClick:()=>ne(),icon:o.a.createElement(E.a,{fontSize:"large"}),size:"medium",sx:{padding:"16px 12px",fontSize:"1.5rem",border:"4px solid black",color:"black",borderRadius:"8px",boxShadow:"4px 4px 0px "+k.backgroundColor,transition:"box-shadow 0.3s ease, transform 0.3s ease","&:hover":{boxShadow:"8px 8px 0px "+k.backgroundColor,transform:"translate(-4px, -4px)",backgroundColor:"#3C4B1E",cursor:"pointer"}}}):L):o.a.createElement("div",{className:"cards-grid"},ue.map((e,t)=>o.a.createElement("div",{key:t,className:"card-container"},o.a.createElement("div",{className:"card "+(T.includes(t)?"flipped":"")},o.a.createElement("div",{className:"card-front",style:{backgroundColor:e.color}},o.a.createElement("div",{className:"card-brand"},l.includes(t)?Object(k.decryptData)(e.brand,R,C.a):"*****"),o.a.createElement("div",{className:"card-number"},l.includes(t)?Object(k.decryptData)(e.code,R,C.a).replace(/(\d{4})(?=\d)/g,"$1 ").trim():"**** **** **** ****"),o.a.createElement("div",{className:"card-info"},o.a.createElement("div",{className:"card-name"},l.includes(t)?Object(k.decryptData)(e.name,R,C.a):"***** ********"),o.a.createElement("div",{className:"card-expiry"},l.includes(t)?Object(k.decryptData)(e.expiry,R,C.a):"**/**")),o.a.createElement(me,{visibleCardIndices:l,index:t,toggleCardFlip:ae,handleCardAction:ce}),o.a.createElement("div",{className:"card-type"},l.includes(t)?Object(k.decryptData)(e.network,R,C.a):"**********"),o.a.createElement("div",{className:"card-label"},l.includes(t)?Object(k.decryptData)(e.network_type,R,C.a):"******")),o.a.createElement("div",{className:"card-back"},o.a.createElement("div",{className:"card-barcode"}),o.a.createElement(me,{visibleCardIndices:l,index:t,toggleCardFlip:ae,handleCardAction:ce}),o.a.createElement("div",{className:"card-cvv"},l.includes(t)?"CVV: "+Object(k.decryptData)(e.cvv,R,C.a):"CVV: ***"))))))),D&&o.a.createElement(le,{isKeyDialogOpen:D,setIsKeyDialogOpen:I,selectedCardIndex:a,viewMode:A,setEncryptionKey:W,setKeyDuration:B,cardData:e[0],callback:de}),S&&o.a.createElement(ye,{isAddCardDialogOpen:S,setIsAddCardDialogOpen:O,viewMode:A,cardsData:e,setCardsData:t,setIsLoading:z,selectedCardIndex:a,setErrorMessage:F,encryptionKey:R,setKeyDuration:B}),o.a.createElement(_,{state:Y,type:J,message:Q,setAlertState:q}),o.a.createElement(j,{show:K}))};const ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(e=>{!function(e,t){e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}(e,t)}).catch(e=>{console.error("Error during service worker registration:",e)})}function Ce(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>e.unregister()).catch(e=>{console.error(e.message)})}l.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ve,null))),function(e){if("serviceWorker"in navigator){if(new URL("/cardholder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/cardholder/service-worker.js";ke?function(e,t,a){fetch(e,{headers:{"Service-Worker":"script"}}).then(r=>{const o=r.headers.get("content-type");404===r.status||o&&!o.includes("javascript")?a&&Ce():we(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e,!0):we(t,e)})}}()},68:function(e,t,a){},8:function(e,t){let a=null;function r(){a||(a=setTimeout(async()=>{await o("pushToServer"),a=null},1e3))}const o=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const o=window.location.host.includes("localhost")?"http://localhost:8888":"https://jeapis.netlify.app",i=localStorage.getItem("access_token"),s=localStorage.getItem("refresh_token");if(i&&null===a&&r(),"pushToServer"!==e&&"deleteFromServer"!==e||i||(e="pushToServer"===e?"fetch":"delete"),"pushToServer"===e||"deleteFromServer"===e){const t=await l(),a="pushToServer"===e?await c(t):null,r=await fetch(o+"/.netlify/functions/getCardHolderData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pushToServer"===e?"create":"delete",access_token:i,refresh_token:s,content:a})});if(!r.ok)throw new Error("Failed to update card data. Server returned status: "+r.status);const u=await r.json();return u.content?(u.access_token?(localStorage.setItem("access_token",u.access_token),localStorage.setItem("refresh_token",u.refresh_token)):(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")),u.content.forEach(t=>{t.is_synced="pushToServer"===e}),await d(),n("upsert",u.content)):[]}return n(e,t)}catch(i){if(o)throw i;return n(e,t)}},n=async(e,t)=>{const a=await l();switch(e){case"upsert":Array.isArray(t)?await s(a,t):await i(a,t);break;case"delete":await i(a,t)}return(await c(a)).filter(e=>!e.is_deleted)},l=()=>new Promise((e,t)=>{const a=indexedDB.open("CardHolder",2);a.onupgradeneeded=e=>{const t=e.target.result.createObjectStore("carddetails",{keyPath:"key"});["key","color","code","expiry","cvv","name","brand","network","network_type","is_synced","is_deleted","last_modified_time"].forEach(e=>t.createIndex(e,e,{unique:"key"===e}))},a.onsuccess=t=>e(t.target.result),a.onerror=e=>t(e.target.error)}),c=e=>new Promise((t,a)=>{const r=e.transaction(["carddetails"],"readonly").objectStore("carddetails").getAll();r.onsuccess=e=>t(e.target.result),r.onerror=e=>a(e.target.error)}),i=(e,t)=>new Promise((a,r)=>{const o=e.transaction(["carddetails"],"readwrite").objectStore("carddetails").put(t);o.onsuccess=()=>a(t),o.onerror=e=>r(e.target.error)}),s=(e,t)=>new Promise((a,r)=>{const o=e.transaction(["carddetails"],"readwrite"),n=o.objectStore("carddetails"),l=[];t.forEach(e=>{const t=n.put(e);t.onsuccess=()=>l.push(e),t.onerror=e=>console.error("Error upserting card:",e.target.error)}),o.oncomplete=()=>a(l),o.onerror=e=>r(e.target.error)}),d=async()=>new Promise(async(e,t)=>{const a=(await l()).transaction(["carddetails"],"readwrite").objectStore("carddetails").clear();a.onsuccess=()=>e("Database truncated successfully"),a.onerror=e=>t("Error opening database: "+e.target.error)});e.exports={processCardData:o,encryptData:(e,t,a)=>a.AES.encrypt(e,t).toString(),decryptData:(e,t,a)=>a.AES.decrypt(e,t).toString(a.enc.Utf8),truncateIndexedDB:d,backgroundColor:"#564bf5",dialogSx:()=>({width:"350px",borderRadius:"12px",boxShadow:"8px 8px 0px #564bf5",border:"6px solid black","& .MuiDialogTitle-root":{fontWeight:"800",borderBottom:"2px solid black",padding:"16px"},"& .MuiDialogContent-root":{},"& .MuiButton-root":{fontWeight:"800",color:"black",borderColor:"black","&:hover":{fontWeight:"800",color:"white",backgroundColor:"black",borderColor:"black"}}}),buttonSx:()=>({minWidth:"100px",transition:"all 0.3s","&:hover":{transform:"translateY(-2px)"}})}}},[[158,1,2]]]);