(this.webpackJsonpcardholder=this.webpackJsonpcardholder||[]).push([[0],{145:function(e,t,a){e.exports=a(187)},153:function(e,t,a){},154:function(e,t){},187:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(112),c=a.n(o),l=(a(153),a(81)),s=a.n(l),i=a(265),d=a(273),m=a(274),u=a(199),p=a(272),g=a(268),h=a(275),b=a(252),f=a(276),E=a(257),v=a(260),k=a(277),w=a(264),y=a(251),x=a(253),C=a(254),S=a(255),j=a(256),O=(a(69),a(113)),D=a(37),_=a(240),N=a(114);var I=function(e){let{show:t}=e;return n.a.createElement(i.a,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.4)",display:t?"flex":"none",justifyContent:"center",alignItems:"center",zIndex:9999}},n.a.createElement(_.a,{sx:{animationDuration:"550ms",["& ."+N.a.circle]:{strokeLinecap:"round"}},size:40,thickness:4}))},R=a(266),A=a(267),W=a(249),T=a(269);function M(e){let{handleInputChange:t,label:a,placeHolder:o,cardDetails:c}=e;const l=Object(T.a)(R.a)(e=>{let{theme:t,bgcolor:a}=e;return{padding:t.spacing(2),borderRadius:6,maxWidth:360,margin:"auto",backgroundColor:a,color:"white",boxShadow:"none",borderRadius:"12px"}}),s=Object(T.a)(u.a)(e=>{let{theme:t}=e;return{marginBottom:t.spacing(.5),fontWeight:500,fontSize:"0.9rem"}}),d=Object(T.a)(E.a)(e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{borderRadius:"12px","& fieldset":{borderColor:"rgba(255, 255, 255, 0.4)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.9rem"},"& .MuiInputBase-input::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1},"& .MuiFormLabel-root":{color:"rgba(255, 255, 255, 0.6)","&.Mui-focused":{color:"white"}}}}),m=e=>{const{name:a,value:r}=e.target;let n=r;switch(a){case"code":n=r.replace(/\D/g,"").replace(/(\d{4})(?=\d)/g,"$1 ").trim();break;case"expiry":n=r.replace(/\D/g,"").replace(/(\d{2})(?=\d)/,"$1/").substr(0,5);break;case"cvv":n=r.replace(/\D/g,"").substr(0,3)}t({target:{name:a,value:n}})},[p,g]=Object(r.useState)(null),h={code:Object(r.useRef)(null),expiry:Object(r.useRef)(null),cvv:Object(r.useRef)(null),name:Object(r.useRef)(null),brand:Object(r.useRef)(null),network:Object(r.useRef)(null),network_type:Object(r.useRef)(null)};Object(r.useEffect)(()=>{h.code.current&&h.code.current.focus()},[]);const b=e=>{g(e),h[e].current&&h[e].current.focus()};Object(r.useEffect)(()=>{p&&h[p].current&&h[p].current.focus()},[p,c]);const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.a.createElement(d,{inputRef:h[e],name:e,placeholder:o[e],value:c[e],fullWidth:!0,variant:"outlined",inputProps:{maxLength:t},onChange:m,onFocus:()=>b(e)})},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.a.createElement(E.a,{inputRef:h[e],name:e,placeholder:o[e],value:c[e],fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},inputProps:{maxLength:t},onChange:m,onFocus:()=>b(e)})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(l,{bgcolor:c.color},n.a.createElement(i.a,{component:"form",noValidate:!0,autoComplete:"off"},n.a.createElement(A.a,{container:!0,spacing:2},n.a.createElement(A.a,{item:!0,xs:12},n.a.createElement(s,null,a.code),f("code",19)),n.a.createElement(A.a,{item:!0,xs:6},n.a.createElement(s,null,a.expiry),f("expiry",5)),n.a.createElement(A.a,{item:!0,xs:6},n.a.createElement(s,null,a.cvv),f("cvv",3)),n.a.createElement(A.a,{item:!0,xs:12},n.a.createElement(s,null,a.name),f("name",20))))),n.a.createElement(i.a,{sx:{marginTop:"40px",maxWidth:360,margin:"auto"}},n.a.createElement(W.a,{sx:{bgcolor:"rgba(0, 0, 0, 0.12)",marginBottom:"15px"}}),n.a.createElement(i.a,{component:"form",noValidate:!0,autoComplete:"off"},n.a.createElement(A.a,{container:!0,spacing:2},n.a.createElement(A.a,{item:!0,xs:12},n.a.createElement(s,null,a.brand,"(Optional)"),v("brand",12)),n.a.createElement(A.a,{item:!0,xs:6},n.a.createElement(s,null,a.network,"(Optional)"),v("network",12)),n.a.createElement(A.a,{item:!0,xs:6},n.a.createElement(s,null,a.network_type,"(Optional)"),v("network_type",12))))))}var B=a(262),L=a(258);function P(e){let{state:t,type:a,message:r,setAlertState:o}=e;return n.a.createElement(B.a,{open:t,autoHideDuration:5e3,onClose:()=>o(!1),anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(L.a,{onClose:()=>o(!1),severity:a},r))}var F=a(270),z=a(118),V=a(117),J=a.n(V);function G(e){let{color:t,setColor:a}=e;const[r,o]=n.a.useState(null),c=Boolean(r),l=c?"simple-popover":void 0;return n.a.createElement("div",null,n.a.createElement(p.a,{sx:{textTransform:"none"},"aria-describedby":l,variant:"contained",onClick:e=>{o(e.currentTarget)}},n.a.createElement(J.a,{fontSize:"large",sx:{padding:"5px",color:"black","&:hover":{borderRadius:"20px",fontWeight:"800",color:"white",backgroundColor:"black"}}})),n.a.createElement(F.b,{id:l,open:c,anchorEl:r,onClose:()=>{o(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},disableRestoreFocus:!0},n.a.createElement(u.a,{sx:{p:2}},n.a.createElement(z.a,{color:t,onChange:e=>a({target:{value:e,name:"color"}})}))))}var H=a(120),K=a(263),U=a(250),$=a(77);function q(e){let{onSyncComplete:t,setShowLoading:a}=e;const r=Object($.b)({flow:"auth-code",ux_mode:"redirect",redirect_uri:"http://localhost:3000/cardholder",scope:"https://www.googleapis.com/auth/drive.appdata"});return n.a.createElement("div",null,n.a.createElement("div",{onClick:()=>{a(!0),localStorage.getItem("access_token")?Object(D.processCardData)("fetch").then(e=>{let r=JSON.parse(localStorage.getItem("card_data"));e.length!==r.length?Object(D.processCardData)("update",r).then(e=>{a(!1),t(!0,"success","Sync Competed")}).catch(e=>{a(!1),t(!0,"error","Issue with Sync try again later.")}):(a(!1),t(!0,"success","Sync Competed"))}).catch(()=>{r()}):r()}},"Sync with Google"))}function Y(e){let{invokeAlert:t,setShowLoading:a,setCardsData:o,setCommonError:c}=e;const[l,s]=Object(r.useState)(null),i=Boolean(l),d=()=>{s(null)},[m,u]=Object(r.useState)(!!localStorage.getItem("access_token"));return n.a.createElement("div",null,n.a.createElement(p.a,{id:"basic-button",sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:e=>{s(e.currentTarget)}},n.a.createElement(U.a,null)),n.a.createElement(H.a,{id:"basic-menu",anchorEl:l,open:i,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"}},n.a.createElement(K.a,{onClick:d},n.a.createElement($.a,{clientId:"386326794734-55j7cufjv2fgn75aa6d96b32i4j817o8.apps.googleusercontent.com"},n.a.createElement(q,{setShowLoading:a,onSyncComplete:t}))),m?n.a.createElement(K.a,{onClick:async()=>{try{a(!0);const e=await Object(D.processCardData)("delete");o(e),0===e.length&&(u(!1),c("No data available."))}catch(e){o([]),c("Error fetching card data: "+e.message)}finally{a(!1)}}},"Delete Data From Google Drive"):n.a.createElement(n.a.Fragment,null)))}function Q(e){let{showDataAtIndex:t,index:a,revealData:r,flipCard:o}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{className:"edit-icon",onClick:()=>{r("edit",a)}},n.a.createElement(x.a,null)),n.a.createElement(p.a,{className:"ai-icon",onClick:()=>{r("show",a)}},t.includes(a)?n.a.createElement(C.a,null):n.a.createElement(S.a,null)),n.a.createElement(p.a,{className:"flip-icon",onClick:()=>o(a)},n.a.createElement(j.a,{fontSize:"large"})))}var X=function(){const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)([]),[c,l]=Object(r.useState)(!1),[x,C]=Object(r.useState)(!1),[S,j]=Object(r.useState)([]),[_,N]=Object(r.useState)({color:"black",code:"",name:"",cvv:"",expiry:"",network:"",brand:"",network_type:""}),[R,A]=Object(r.useState)(""),[W,T]=Object(r.useState)(),[B,L]=Object(r.useState)(""),[F,z]=Object(r.useState)(0),[V,J]=Object(r.useState)(!1),[H,K]=Object(r.useState)(""),[U,$]=Object(r.useState)(""),[q,X]=Object(r.useState)(!1),Z=e=>s.a.AES.encrypt(e,B).toString(),ee=e=>{try{return s.a.AES.decrypt(e,B).toString(s.a.enc.Utf8)}catch(t){return""}};Object(r.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("code");e?te(e):localStorage.getItem("access_token")?ae():(t([]),$("No data available."))},[]);const te=async e=>{try{X(!0);const t=await fetch("http://localhost:8888/.netlify/functions/googleAuth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),a=await t.json();localStorage.setItem("access_token",a.response.tokens.access_token),localStorage.setItem("refresh_token",a.response.tokens.refresh_token),localStorage.setItem("expiryDate",a.response.tokens.expiry_date)}catch(V){console.error("Error fetching tokens:",V)}finally{X(!1),window.location.href="/"}},ae=async()=>{try{X(!0);const e=await Object(D.processCardData)("fetch");t(e),0===e.length&&$("No data available.")}catch(V){t([]),$("Error fetching card data: "+V.message)}finally{X(!1)}},re=e=>j(S.includes(e)?S.filter(t=>t!==e):[...S,e]),ne=e=>{o(a.includes(e)?a.filter(t=>t!==e):[...a,e])},oe=Object(r.useCallback)(e=>{let{duration:t}=e;return n.a.createElement(O.a,{strokeWidth:4,size:40,isPlaying:!0,duration:t,colors:["#004777","#F7B801","#A30000","#A30000"],colorsTime:[7,5,2,0],onComplete:()=>{z(0),L(""),o([])}},e=>{let{remainingTime:t}=e;return t})},[B]),ce=()=>{z(10),l(!1)},le=n.a.useMemo(()=>Array.from({length:10},(e,t)=>({value:10*(t+1),label:10*(t+1)+"s"})),[]),se=(t,r)=>{if(t&&A(t),void 0!==r&&T(r),B)if("edit"===t){const t=e[r];N({color:t.color,code:ee(t.code),name:ee(t.name),cvv:ee(t.cvv),expiry:ee(t.expiry),network:ee(t.network),brand:ee(t.brand),network_type:ee(t.network_type)}),l(!0)}else ne(r);else a.includes(r)?ne(r):C(!0)},ie=e=>{const{name:t,value:a}=e.target;N(e=>({...e,[t]:a}))},[de,me]=Object(r.useState)(!1),[ue,pe]=Object(r.useState)("success"),[ge,he]=Object(r.useState)("none");return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{sx:{flexGrow:1}},n.a.createElement(d.a,{position:"static",sx:{backgroundColor:"#564bf5",borderBottom:"6px solid black"}},n.a.createElement(m.a,null,n.a.createElement(u.a,{variant:"h6",sx:{flexGrow:1}},"My Cards"),F>0&&B&&n.a.createElement(oe,{duration:F}),n.a.createElement(p.a,{sx:{color:"white",marginLeft:"1rem","&:hover":{backgroundColor:"black"}},onClick:()=>l(!0)},n.a.createElement(y.a,null)),n.a.createElement(Y,{invokeAlert:(e,t,a)=>{me(e),pe(t),he(a)},setShowLoading:X,setCardsData:t,setCommonError:$})))),n.a.createElement("div",{className:"content"},0===e.length?n.a.createElement(u.a,{variant:"h6",sx:{flexGrow:1,justifyContent:"center",display:"flex"}},"No data available."===U?n.a.createElement(g.a,{label:"Add Card",variant:"outlined",onClick:()=>l(!0),icon:n.a.createElement(y.a,{fontSize:"large"}),size:"medium",sx:{padding:"16px 12px",fontSize:"1.5rem",border:"4px solid black",color:"black",borderRadius:"8px",boxShadow:"4px 4px 0px #564bf5",transition:"box-shadow 0.3s ease, transform 0.3s ease","&:hover":{boxShadow:"8px 8px 0px #564bf5",transform:"translate(-4px, -4px)",backgroundColor:"#3C4B1E",cursor:"pointer"}}}):U):n.a.createElement("div",{className:"cards-grid"},e.map((e,t)=>n.a.createElement("div",{key:t,className:"card-container"},n.a.createElement("div",{className:"card "+(S.includes(t)?"flipped":"")},n.a.createElement("div",{className:"card-front",style:{backgroundColor:e.color}},n.a.createElement("div",{className:"card-brand"},a.includes(t)?ee(e.brand):"*****"),n.a.createElement("div",{className:"card-number"},a.includes(t)?ee(e.code).replace(/(\d{4})(?=\d)/g,"$1 ").trim():"**** **** **** ****"),n.a.createElement("div",{className:"card-info"},n.a.createElement("div",{className:"card-name"},a.includes(t)?ee(e.name):"***** ********"),n.a.createElement("div",{className:"card-expiry"},a.includes(t)?ee(e.expiry):"**/**")),n.a.createElement(Q,{showDataAtIndex:a,index:t,revealData:se,flipCard:re}),n.a.createElement("div",{className:"card-type"},a.includes(t)?ee(e.type):"**********"),n.a.createElement("div",{className:"card-label"},a.includes(t)?ee(e.network_type):"******")),n.a.createElement("div",{className:"card-back"},n.a.createElement("div",{className:"card-barcode"}),n.a.createElement(Q,{showDataAtIndex:a,index:t,revealData:se,flipCard:re}),n.a.createElement("div",{className:"card-cvv"},a.includes(t)?"CVV: "+ee(e.cvv):"CVV: ***"))))))),n.a.createElement(h.a,{open:x},n.a.createElement(b.a,null,"Key"),n.a.createElement(f.a,null,n.a.createElement(E.a,{autoFocus:!0,required:!0,margin:"dense",id:"cardKey",name:"cardKey",label:"Key",type:"password",fullWidth:!0,variant:"standard",value:B,onChange:e=>{L(e.target.value)},error:V,helperText:H}),"edit"!==R&&n.a.createElement(i.a,{sx:{width:300,marginTop:2}},n.a.createElement(u.a,{variant:"body2",gutterBottom:!0},"Time to Destroy"),n.a.createElement(v.a,{name:"timeToDestroy",defaultValue:30,step:10,min:10,marks:le,valueLabelDisplay:"auto",value:F,onChange:(e,t)=>z(t)}))),n.a.createElement(k.a,null,n.a.createElement(w.a,{onClick:()=>{J(!0),C(!1)}},"Close"),n.a.createElement(w.a,{onClick:()=>B.length<10?(J(!0),void K("Minimum 10 characters required")):16!==ee(e[W].code).length?(J(!0),void K("Invalid Key")):(J(!1),K(""),0===F&&"edit"!==R&&z(10),C(!1),void se(R,W))},"edit"===R?"Edit":"Show"))),n.a.createElement(h.a,{open:c,PaperProps:{component:"form",onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget),a=Object.fromEntries(t.entries()).email;console.log(a),ce()},sx:{borderRadius:"12px",boxShadow:"8px 8px 0px #564bf5",border:"6px solid black","& .MuiDialogTitle-root":{fontWeight:"800"},"& .MuiDialogContent-root":{padding:"16px"},"& .MuiButton-root":{fontWeight:"800",color:"black",borderColor:"black","&:hover":{fontWeight:"800",color:"white",backgroundColor:"black"}}}}},n.a.createElement(b.a,null,n.a.createElement("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"800"}},n.a.createElement("span",null,_.code?"Add Card":"Edit Card"),n.a.createElement(G,{color:_.color,setColor:ie}))),n.a.createElement(f.a,null,n.a.createElement(M,{handleInputChange:ie,label:{color:"Color",code:"Number",name:"Name",cvv:"CVV",expiry:"Expiry Date",network:"Network",brand:"Brand",network_type:"Network Type"},placeHolder:{color:"grey",code:"1111222233334444",name:"xyz",cvv:"123",expiry:"MM/YY",network:"Visa/Rupay",brand:"HDFC/SBI",network_type:"Credit/Debit/MasteCard"},cardDetails:_})),n.a.createElement(k.a,null,n.a.createElement(w.a,{onClick:ce},"Cancel"),n.a.createElement(w.a,{onClick:()=>{let a,r={code:Z(_.code),name:Z(_.name),cvv:Z(_.cvv),expiry:Z(_.expiry),brand:_.brand?Z(_.brand):_.brand,network:_.network?Z(_.network):_.network,network_type:_.network_type?Z(_.network_type):_.network_type,color:_.color},n=W;"edit"!==R?(a=[...e,r],t(a)):(a=[...e],a[n]={...a[n],...r},t(a)),(async e=>{try{X(!0);const a=await Object(D.processCardData)("update",e);t(a),0===a.length&&$("No data available.")}catch(V){t([]),$("Error updating card data: "+V.message)}finally{X(!1)}})(a)}},"edit"===R?"Save":"Add"))),n.a.createElement(P,{state:de,type:ue,message:ge,setAlertState:me}),n.a.createElement("footer",{className:"footer"},n.a.createElement("p",null,"All card details are stored in an encrypted format.")),n.a.createElement(I,{show:q}))};const Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(X,null))),function(e){if("serviceWorker"in navigator){if(new URL("/cardholder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/cardholder/service-worker.js";Z?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ee(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):ee(t,e)})}}()},37:function(e,t){e.exports={processCardData:async(e,t)=>{try{const a=await fetch("http://localhost:8888/.netlify/functions/getCardHolderData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token"),content:t})});if(!a.ok)return Promise.reject(new Error("Failed to update card data. Server returned status: "+a.status));const r=await a.json();return r.content?("delete"===e?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("card_data")):(localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),localStorage.setItem("card_data",JSON.stringify(r.content))),Promise.resolve(r.content)):Promise.resolve([])}catch(a){return Promise.reject(new Error("Error in updating card data: "+a.message))}}}},69:function(e,t,a){}},[[145,1,2]]]);